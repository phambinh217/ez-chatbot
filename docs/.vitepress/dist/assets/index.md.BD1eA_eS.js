import{o as r,c as d,j as p,_ as B,p as b,h as S,q as G,W as ie,G as y,k as j,r as Z,t as V,F as X,C as ee,e as I,b as z,H as le,n as te,w as q,N as re,v as E,a1 as K,a2 as Q,T as Y}from"./chunks/framework.CZ1Dtdza.js";const ue={isQuestion:!0,onValidate({context:e,answer:t,script:o}){if(t.content.includes("@")==!1){const a={type:"text",position:"left",content:"Your email seem to be invalid",...o.errorMessage};return e.addConversationMessage(a),!1}return!0}},pe={isQuestion:!0},de={isQuestion:!1},fe={isQuestion:!0,onValidate({context:e,answer:t,script:o}){var l;const a=((l=t.content)==null?void 0:l.value)||t.content;if(o.options.map(s=>s.value||s).includes(a)==!1){const s={type:"text",position:"left",content:"Your answer seem to be invalid",...o.errorMessage};return e.addConversationMessage(s),!1}return!0}},H={text:de,email:ue,question:pe,select:fe},D=e=>{const t=e.type,o=H[t]||null;return o?!!(o!=null&&o.isQuestion):!1};async function me(e,t){const a={id:1},c={id:1};for(let s=0;s<e.length;s++){const i=e[s];D(i)&&(a[i.name]=i.answer.content)}const l={command:"UPDATE_OR_CREATE_COMMAND",sheet_title:t.sheet||"default",data:a,where:c};try{const s=await fetch(t.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(console.log("Response:",s),!s.ok)throw new Error(`Error: ${s.statusText}`);const i=await s.json();console.log("Data saved:",i)}catch(s){console.error("Error saving data:",s)}}function he({app:e,options:t}){const o=t.plugins.googleSheet;e.onFinished(a=>{const c=a.scripts;me(c,o)})}function ve({app:e,options:t}){he({app:e,options:t})}const ge=(e=16)=>{let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=o.length;let c=0;for(;c<e;)t+=o.charAt(Math.floor(Math.random()*a)),c+=1;return t},ye={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function _e(e,t){return r(),d("svg",ye,t[0]||(t[0]=[p("path",{d:"m2 21 21-9L2 3v7l15 2-15 2z"},null,-1)]))}const be={render:_e},Ce={class:"--fc-composer-container"},we=["value","placeholder"],xe=["value","placeholder"],ke={__name:"ChatComposer",props:{message:{type:String,required:""},options:{type:Object,default:()=>{}},longMessage:{type:Boolean,default:!1}},emits:["update:message","submit"],setup(e,{emit:t}){const o=e,a=t,c=b(),l=S(()=>{var u;return((u=o.options)==null?void 0:u.placeholder)||"Type a message"}),s=()=>{a("submit")},i=()=>{a("submit")},m=u=>{const g=u.target.value;a("update:message",g)};return G(()=>o.message,()=>{const u=c.value;u.style.height="40px",u.style.height=u.scrollHeight+"px"}),(u,g)=>(r(),d("div",Ce,[e.longMessage?(r(),d("textarea",{key:0,value:e.message,class:"--fc-composer-input",placeholder:l.value,ref_key:"inputRef",ref:c,onInput:m},null,40,we)):(r(),d("input",{key:1,value:e.message,ref_key:"inputRef",ref:c,class:"--fc-composer-input",placeholder:l.value,onInput:m,onKeydown:ie(i,["enter"])},null,40,xe)),p("div",null,[p("button",{class:"--fc-composer-submit-button",onClick:s},[y(j(be),{class:"--fc-icon"})])])]))}},Me=B(ke,[["__scopeId","data-v-5ec43aa7"]]),Se={__name:"ChatConversation",setup(e,{expose:t}){const o=b(),a=()=>{const l=o.value;l.scrollTop,l.scrollHeight,l.clientHeight};return t({scrollToBottom:()=>{o.value.scrollTo({top:o.value.scrollHeight,behavior:"smooth"})}}),(l,s)=>(r(),d("div",{class:"--fc-conversation-container",ref_key:"conversationMessagesRef",ref:o,onScroll:a},[s[0]||(s[0]=p("div",{class:"--fc-conversation-padding"},null,-1)),Z(l.$slots,"default",{},void 0,!0)],544))}},$e=B(Se,[["__scopeId","data-v-c7ba4ebc"]]),Be={class:"--fc-message-content-inner"},Oe={class:"--fc-message-text"},Ie={key:0,class:"--fc-message-option-list"},Te=["onClick"],We={__name:"CommonMessage",props:{message:{type:Object,required:!0},options:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:t}){const o=e,a=t,c=(l,s)=>{const i=o.message;a("select-option",{message:i,option:l,optionIndex:s})};return(l,s)=>{var i;return r(),d("div",Be,[p("div",Oe,V(((i=e.message.content)==null?void 0:i.label)||e.message.content),1),e.message.options?(r(),d("div",Ie,[(r(!0),d(X,null,ee(e.message.options,(m,u)=>(r(),d("div",{key:u,class:"--fc-message-option-item",onClick:g=>c(m,u)},V((m==null?void 0:m.label)||m),9,Te))),128))])):I("",!0)])}}},Ue=B(We,[["__scopeId","data-v-7f301333"]]),je={class:"--fc-message-container"},Pe={key:0,class:"--fc-message-user"},Re={class:"--fc-message-avatar"},Ae=["src"],De={class:"--fc-message-content-container"},Ne={__name:"ChatMessage",props:{message:{type:Object,required:!0},options:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:t}){const o=e,a=t,c=S(()=>{var s;return{component:((s=H[o.message.type])==null?void 0:s.component)||Ue,...o.message}}),l=s=>{a("select-option",s)};return(s,i)=>{var m,u,g,w;return r(),d("div",{class:te({"--fc-message-agent-user":e.message.position=="right","--fc-message-host-user":e.message.position=="left"})},[p("div",je,[c.value.position=="left"?(r(),d("div",Pe,[p("div",Re,[(u=(m=e.options)==null?void 0:m.hostUser)!=null&&u.avatarUrl?(r(),d("img",{key:0,src:(w=(g=e.options)==null?void 0:g.hostUser)==null?void 0:w.avatarUrl},null,8,Ae)):I("",!0)])])):I("",!0),p("div",De,[c.value.component?(r(),z(le(c.value.component),{key:0,message:c.value,options:e.options,onSelectOption:l},null,40,["message","options"])):I("",!0)])])],2)}}},se=B(Ne,[["__scopeId","data-v-73bbe1e2"]]),Le={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Ve(e,t){return r(),d("svg",Le,t[0]||(t[0]=[p("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))}const qe={render:Ve},ze={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Fe(e,t){return r(),d("svg",ze,t[0]||(t[0]=[p("path",{d:"M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"},null,-1)]))}const He={render:Fe},Ee={class:"--fc-header-container"},Ke={class:"--fc-header-user"},Qe={class:"--fc-user-avatar"},Ye=["src"],Je={class:"--fc-user-name"},Ge={class:"--fc-header-buttons"},Ze={class:"--fc-close-button"},Xe={__name:"ChatHeader",props:{options:{type:Object,default:()=>{}}},emits:["click-reset-button","click-close-button"],setup(e,{emit:t}){const o=t;return(a,c)=>{var l,s,i,m,u,g;return r(),d("div",Ee,[p("div",Ke,[p("div",Qe,[(s=(l=e.options)==null?void 0:l.hostUser)!=null&&s.avatarUrl?(r(),d("img",{key:0,src:(m=(i=e.options)==null?void 0:i.hostUser)==null?void 0:m.avatarUrl},null,8,Ye)):I("",!0)]),p("div",Je,V((g=(u=e.options)==null?void 0:u.hostUser)==null?void 0:g.name),1)]),p("div",Ge,[p("button",{class:"--fc-reset-button",onClick:c[0]||(c[0]=w=>o("click-reset-button"))},[y(j(He),{class:"--fc-icon"})]),p("button",Ze,[y(j(qe),{class:"--fc-icon",onClick:c[1]||(c[1]=w=>o("click-close-button"))})])])])}}},et=B(Xe,[["__scopeId","data-v-c74a0ab6"]]),tt={key:0,class:"--fc-modal-backdrop"},st={__name:"TheModal",props:{open:{type:Boolean,default:!1}},setup(e){return(t,o)=>e.open?(r(),d("div",tt,[Z(t.$slots,"default",{},void 0,!0)])):I("",!0)}},ot=B(st,[["__scopeId","data-v-0a94d001"]]),nt={__name:"ChatResetConfirmModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","confirmed"],setup(e,{emit:t}){const o=t,a=()=>{o("confirmed")},c=()=>{o("update:open",!1)};return(l,s)=>(r(),z(ot,{open:e.open},{default:q(()=>[p("div",{class:"--fc-modal-container"},[s[0]||(s[0]=p("div",{class:"--fc-modal-title"}," Are you sure to restart the chat? ",-1)),p("div",{class:"--fc-modal-actions"},[p("button",{class:"--fc-negative-button",onClick:a}," Yes "),p("button",{class:"--fc-default-button",onClick:c}," No ")])])]),_:1},8,["open"]))}},at={class:"--fc-body"},ct={key:0,class:"skip-container"},it={__name:"ChatWindow",props:{scripts:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},emits:["finished","click-close-button"],setup(e,{expose:t,emit:o}){const a=e,c=o,l=S(()=>{var f,n;return(n=(f=a.options)==null?void 0:f.styles)==null?void 0:n.chatWindow}),s=b({open:!1}),i=()=>({id:null,position:"left",type:"text",content:"",options:null}),m=f=>({id:ge(),type:"text",skippable:!1,skipText:"Skip",longAnswer:!1,content:"",answer:i(),...f}),u=S(()=>a.scripts.map(m)),g=S(()=>({scripts:u.value,currentScript:v.value,currentScriptIndex:R.value,latestUserMessage:P.value,conversationMessages:w.value,addConversationMessage:T})),w=b([]),$=b(""),v=b(m()),P=b(i()),_=b(i()),R=S(()=>u.value.map(n=>n.id).indexOf(v.value.id)),N=b(),F=S(()=>{let f=null;const n=u.value[R.value+1];return n&&(f=n.id),f}),T=f=>{w.value.push(f),setTimeout(()=>N.value.scrollToBottom(),100),f.position=="left"?_.value=i():D(v.value)?(_.value=f,v.value.answer={...f}):_.value=i()},L=f=>{let n;f?n=u.value.find(M=>M.id==f):n=u.value.find(()=>!0),n&&(v.value=n,T({position:"left",content:n.content,options:n.options,type:n.type}),k())},h=f=>{setTimeout(()=>L(f),300)},C=()=>h(null),W=()=>L(null),k=async(f=!0)=>{var M;if(D(v.value)&&!_.value.content&&f)return!1;if(f){const x=H[v.value.type];if(x&&(x!=null&&x.onValidate)&&x.onValidate({context:g.value,script:v.value,answer:_.value,options:a.options})===!1)return!1}let n=v.value.next;if(typeof n=="function"&&(n=n(g.value,_.value.content),n instanceof Promise))try{n=await n}catch(x){console.log(x);return}if(typeof n=="object"){const x=((M=_.value.content)==null?void 0:M.value)||_.value.content;n=n[x]||(n==null?void 0:n.__unmatched)}if(n||(n=F.value),n){h(n);return}if(!n&&D(v.value)==!1){c("finished",g.value);return}if(!n&&D(v.value)&&_.value){c("finished",g.value);return}},U=async()=>{$.value.trim()&&(T({position:"right",content:$.value,type:"text"}),$.value="",await k())},O=async({option:f})=>{T({position:"right",content:f,type:"text"}),await k()},A=O,oe=async()=>{await k(!1)},ne=()=>{s.value.open=!0},ae=()=>{c("click-close-button")},ce=()=>{s.value.open=!1,w.value=[],$.value="",v.value=m(),P.value=i(),_.value=i(),h()};return t({addConversationMessage:T,triggerSelectOptionInMessage:A,startConversationWithDelay:C,startConversation:W}),(f,n)=>(r(),d("div",{class:"--fc-window",style:re(l.value)},[y(et,{options:e.options,onClickResetButton:ne,onClickCloseButton:ae},null,8,["options"]),p("div",at,[y($e,{ref_key:"chatConversationRef",ref:N,options:e.options},{default:q(()=>[(r(!0),d(X,null,ee(w.value,(M,x)=>(r(),z(se,{key:x,message:M,options:e.options,onSelectOption:O},null,8,["message","options"]))),128)),v.value.skippable?(r(),d("div",ct,[p("button",{onClick:oe},V(v.value.skipText),1)])):I("",!0)]),_:1},8,["options"]),y(Me,{message:$.value,"onUpdate:message":n[0]||(n[0]=M=>$.value=M),options:e.options,"long-message":v.value.longAnswer,onSubmit:U},null,8,["message","options","long-message"]),y(nt,{open:s.value.open,"onUpdate:open":n[1]||(n[1]=M=>s.value.open=M),onConfirmed:ce},null,8,["open"])])],4))}},lt=B(it,[["__scopeId","data-v-1dc64f0a"]]),rt={class:"--fc-welcome-message-container"},ut={__name:"ChatWelcomeMessage",props:{message:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:t}){const o=t,a=({message:c,option:l,optionIndex:s})=>{o("select-option",{message:c,option:l,optionIndex:s})};return(c,l)=>(r(),d("div",rt,[y(se,{message:e.message,onSelectOption:a},null,8,["message"])]))}},pt=B(ut,[["__scopeId","data-v-3d228365"]]),dt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function ft(e,t){return r(),d("svg",dt,t[0]||(t[0]=[p("path",{d:"M15 4v7H5.17L4 12.17V4zm1-2H3a1 1 0 0 0-1 1v14l4-4h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m5 4h-2v9H6v2a1 1 0 0 0 1 1h11l4 4V7a1 1 0 0 0-1-1"},null,-1)]))}const mt={render:ft},ht={class:"--fc-application-inner"},vt={class:"--fc-absolute --fc-bottom-[100%] --fc-w-[400px]"},gt={class:"--fc-absolute --fc-bottom-[100%] --fc-w-[350px]"},yt={__name:"ChatApp",props:{scripts:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},emits:["finished"],setup(e,{expose:t,emit:o}){const a=e,c=o,l=b([]),s=b(null),i=b(!1),m=b(!1),u=S(()=>a.options.welcomeMessage&&m.value==!1),g=S(()=>a.scripts[0]),w=S(()=>{var h,C;return((C=(h=a.options)==null?void 0:h.embedded)==null?void 0:C.type)!="background"}),$=h=>{l.value.push(h)},v=h=>{c("finished",h);for(const C of l.value)C(h)},P=()=>{i.value=!i.value,i.value?_():R()},_=()=>{i.value=!0,m.value==!1&&s.value.startConversationWithDelay(),m.value=!0},R=()=>{i.value=!1},N=()=>P(),F=h=>{u.value!=!1&&(i.value=!0,s.value.startConversation(),s.value.triggerSelectOptionInMessage(h),m.value=!0)},T=()=>{var k,U,O,A;if(typeof document>"u")return!1;const h=document.querySelector(":root"),C=(U=(k=a.options)==null?void 0:k.styles)==null?void 0:U.primaryColor,W=(A=(O=a.options)==null?void 0:O.styles)==null?void 0:A.primaryLightColor;C&&(h==null||h.style.setProperty("--fc-primary-color",C)),W&&(h==null||h.style.setProperty("--fc-primary-light-color",W))};G(()=>a.options,()=>T(),{immediate:!0});const L=()=>{ve({app:{onFinished:$},options:a.options})};return E(()=>L()),E(()=>console.log("%c This website is using formchat.net to create chat boxes. Please visit https://formchat.net/ to get started.","background: #222; color: #bada55")),t({onFinished:$,toggleChatWindow:P,showChatWindow:_,hideChatWindow:R}),(h,C)=>{var W,k,U,O;return r(),d("div",{class:te(["--fc-application --fc-formchat-dot-net",{"--fc-dark-theme":((k=(W=e.options)==null?void 0:W.styles)==null?void 0:k.theme)==="dark","--fc-light-theme":((O=(U=e.options)==null?void 0:U.styles)==null?void 0:O.theme)==="light"}])},[p("div",ht,[y(Y,{"enter-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","enter-from-class":"--fc-opacity-0 --fc-translate-y-4","enter-to-class":"--fc-opacity-100 --fc-translate-y-0","leave-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","leave-from-class":"--fc-opacity-100 --fc-translate-y-0","leave-to-class":"--fc-opacity-0 --fc-translate-y-4"},{default:q(()=>[K(p("div",vt,[y(lt,{ref_key:"chatWindowRef",ref:s,options:e.options,scripts:e.scripts,onFinished:v,onClickCloseButton:C[0]||(C[0]=A=>i.value=!1)},null,8,["options","scripts"])],512),[[Q,i.value]])]),_:1}),y(Y,{"enter-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","enter-from-class":"--fc-opacity-0 --fc-translate-y-4","enter-to-class":"--fc-opacity-100 --fc-translate-y-0","leave-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","leave-from-class":"--fc-opacity-100 --fc-translate-y-0","leave-to-class":"--fc-opacity-0 --fc-translate-y-4"},{default:q(()=>[K(p("div",gt,[y(pt,{message:g.value,onSelectOption:F},null,8,["message"])],512),[[Q,u.value]])]),_:1})]),w.value?(r(),d("div",{key:0,class:"--fc-bubble-container",onClick:N},[y(j(mt),{class:"--fc-bubble-icon"})])):I("",!0)],2)}}},_t=B(yt,[["__scopeId","data-v-c5a8d6ef"]]),J={scripts:[{content:"Bạn sinh năm bao nhiêu",name:"age",type:"select",options:[1996,1997,1998,1999,2e3]},{content:"Cảm ơn bạn đã cung cấp thông tin"}],options:{hostUser:{name:"Phạm Bình",avatarUrl:"/images/phambinh.jpeg"},placeholder:"Type your message here...",closeButton:!0,toggleButton:!0,resetButton:!0,clickOutSideClose:!0,welcomeMessage:!0,styles:{theme:"dark",primaryColor:"#06b6d4",primaryLightColor:"#a5f3fc",chatWindow:{backgroundImage:"url(https://wallpapers.com/images/hd/whatsapp-chat-background-fb34cc4b2hg9lmix.jpg)",backgroundSize:"contain"}},plugins:{googleSheet:{url:"https://script.google.com/macros/s/AKfycbxPp0oSxDWLM_jDn85fGc4dEAe0AtgaeYNZJixO49LJfBMSKlDicu2zm2qgzz49-UM9/exec",sheet:"default"}},hooks:{}}},bt={__name:"ChatApp",setup(e){return(t,o)=>(r(),z(_t,{scripts:j(J).scripts,options:j(J).options},null,8,["scripts","options"]))}},kt=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"home","hero":{"name":"FormChat","text":"","tagline":"Transform a traditional form to chat box","actions":[{"theme":"brand","text":"Examples","link":"/examples"},{"theme":"alt","text":"WordPress integration","link":"/examples"},{"theme":"alt","text":"Shopify integration","link":"/examples"}]},"features":[{"title":"10+ Field types","details":"Simle question, long question, radio question, rating, datetime picker,..."},{"title":"Easy customize","details":"Lorem ipsum dolor sit amet, consectetur adipiscing elit"},{"title":"Perfect responsive","details":"Lorem ipsum dolor sit amet, consectetur adipiscing elit"},{"title":"Lightweight","details":"Only 106 KB js, and 17 KB css before gzip"}]},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),Ct={name:"index.md"},Mt=Object.assign(Ct,{setup(e){return(t,o)=>(r(),d("div",null,[y(bt)]))}});export{kt as __pageData,Mt as default};
