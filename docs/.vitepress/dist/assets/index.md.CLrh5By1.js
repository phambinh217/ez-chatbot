import{o as p,c as v,j as f,_ as P,p as $,h as j,q as Z,W as le,G as S,k as N,r as X,t as F,F as ee,C as te,e as R,b as z,H as re,n as se,w as q,N as ue,v as K,a1 as H,a2 as Q,T as Y}from"./chunks/framework.CZ1Dtdza.js";var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne={exports:{}};(function(e,s){(function(t,o){e.exports=o()})(de,function(){var t="__v-click-outside",o=typeof window<"u",c=typeof navigator<"u",r=o&&("ontouchstart"in window||c&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],n=function(l){var h=l.event,_=l.handler;(0,l.middleware)(h)&&_(h)},i=function(l,h){var _=function(b){var w=typeof b=="function";if(!w&&typeof b!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:w?b:b.handler,middleware:b.middleware||function(M){return M},events:b.events||r,isActive:b.isActive!==!1,detectIframe:b.detectIframe!==!1,capture:!!b.capture}}(h.value),y=_.handler,A=_.middleware,x=_.detectIframe,B=_.capture;if(_.isActive){if(l[t]=_.events.map(function(b){return{event:b,srcTarget:document.documentElement,handler:function(w){return function(M){var O=M.el,d=M.event,C=M.handler,k=M.middleware,I=d.path||d.composedPath&&d.composedPath();(I?I.indexOf(O)<0:!O.contains(d.target))&&n({event:d,handler:C,middleware:k})}({el:l,event:w,handler:y,middleware:A})},capture:B}}),x){var L={event:"blur",srcTarget:window,handler:function(b){return function(w){var M=w.el,O=w.event,d=w.handler,C=w.middleware;setTimeout(function(){var k=document.activeElement;k&&k.tagName==="IFRAME"&&!M.contains(k)&&n({event:O,handler:d,middleware:C})},0)}({el:l,event:b,handler:y,middleware:A})},capture:B};l[t]=[].concat(l[t],[L])}l[t].forEach(function(b){var w=b.event,M=b.srcTarget,O=b.handler;return setTimeout(function(){l[t]&&M.addEventListener(w,O,B)},0)})}},m=function(l){(l[t]||[]).forEach(function(h){return h.srcTarget.removeEventListener(h.event,h.handler,h.capture)}),delete l[t]},u=o?{beforeMount:i,updated:function(l,h){var _=h.value,y=h.oldValue;JSON.stringify(_)!==JSON.stringify(y)&&(m(l),i(l,{value:_}))},unmounted:m}:{};return{install:function(l){l.directive("click-outside",u)},directive:u}})})(ne);var pe=ne.exports;const fe={isQuestion:!0,onValidate({context:e,answer:s,script:t}){if(s.content.includes("@")==!1){const o={type:"text",position:"left",content:"Your email seem to be invalid",...t.errorMessage};return e.addConversationMessage(o),!1}return!0}},me={isQuestion:!0},ve={isQuestion:!1},he={isQuestion:!0,onValidate({context:e,answer:s,script:t}){var r;const o=((r=s.content)==null?void 0:r.value)||s.content;if(t.options.map(n=>n.value||n).includes(o)==!1){const n={type:"text",position:"left",content:"Your answer seem to be invalid",...t.errorMessage};return e.addConversationMessage(n),!1}return!0}},J={text:ve,email:fe,question:me,select:he},V=e=>{const s=e.type,t=J[s]||null;return t?!!(t!=null&&t.isQuestion):!1};async function ge(e,s){const o={id:1},c={id:1};for(let n=0;n<e.length;n++){const i=e[n];V(i)&&(o[i.name]=i.answer.content)}const r={command:"UPDATE_OR_CREATE_COMMAND",sheet_title:s.sheet||"default",data:o,where:c};try{const n=await fetch(s.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("Response:",n),!n.ok)throw new Error(`Error: ${n.statusText}`);const i=await n.json();console.log("Data saved:",i)}catch(n){console.error("Error saving data:",n)}}function ye({app:e,options:s}){const t=s.plugins.googleSheet;e.onFinished(o=>{const c=o.scripts;ge(c,t)})}function _e({app:e,options:s}){ye({app:e,options:s})}const be=(e=16)=>{let s="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=t.length;let c=0;for(;c<e;)s+=t.charAt(Math.floor(Math.random()*o)),c+=1;return s},we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Ce(e,s){return p(),v("svg",we,s[0]||(s[0]=[f("path",{d:"m2 21 21-9L2 3v7l15 2-15 2z"},null,-1)]))}const ke={render:Ce},xe={class:"--fc-composer-container"},Me=["value","placeholder"],Se=["value","placeholder"],$e={__name:"ChatComposer",props:{message:{type:String,required:""},options:{type:Object,default:()=>{}},longMessage:{type:Boolean,default:!1}},emits:["update:message","submit"],setup(e,{emit:s}){const t=e,o=s,c=$(),r=j(()=>{var u;return((u=t.options)==null?void 0:u.placeholder)||"Type a message"}),n=()=>{o("submit")},i=()=>{o("submit")},m=u=>{const l=u.target.value;o("update:message",l)};return Z(()=>t.message,()=>{const u=c.value;u.style.height="40px",u.style.height=u.scrollHeight+"px"}),(u,l)=>(p(),v("div",xe,[e.longMessage?(p(),v("textarea",{key:0,value:e.message,class:"--fc-composer-input",placeholder:r.value,ref_key:"inputRef",ref:c,onInput:m},null,40,Me)):(p(),v("input",{key:1,value:e.message,ref_key:"inputRef",ref:c,class:"--fc-composer-input",placeholder:r.value,onInput:m,onKeydown:le(i,["enter"])},null,40,Se)),f("div",null,[f("button",{class:"--fc-composer-submit-button",onClick:n},[S(N(ke),{class:"--fc-icon"})])])]))}},Oe=P($e,[["__scopeId","data-v-5ec43aa7"]]),Te={__name:"ChatConversation",setup(e,{expose:s}){const t=$(),o=()=>{const r=t.value;r.scrollTop,r.scrollHeight,r.clientHeight};return s({scrollToBottom:()=>{t.value.scrollTo({top:t.value.scrollHeight,behavior:"smooth"})}}),(r,n)=>(p(),v("div",{class:"--fc-conversation-container",ref_key:"conversationMessagesRef",ref:t,onScroll:o},[n[0]||(n[0]=f("div",{class:"--fc-conversation-padding"},null,-1)),X(r.$slots,"default",{},void 0,!0)],544))}},Be=P(Te,[["__scopeId","data-v-c7ba4ebc"]]),Ie={class:"--fc-message-content-inner"},We={class:"--fc-message-text"},je={key:0,class:"--fc-message-option-list"},Pe=["onClick"],Ae={__name:"CommonMessage",props:{message:{type:Object,required:!0},options:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:s}){const t=e,o=s,c=(r,n)=>{const i=t.message;o("select-option",{message:i,option:r,optionIndex:n})};return(r,n)=>{var i;return p(),v("div",Ie,[f("div",We,F(((i=e.message.content)==null?void 0:i.label)||e.message.content),1),e.message.options?(p(),v("div",je,[(p(!0),v(ee,null,te(e.message.options,(m,u)=>(p(),v("div",{key:u,class:"--fc-message-option-item",onClick:l=>c(m,u)},F((m==null?void 0:m.label)||m),9,Pe))),128))])):R("",!0)])}}},Ue=P(Ae,[["__scopeId","data-v-7f301333"]]),Re={class:"--fc-message-container"},Ee={key:0,class:"--fc-message-user"},Ne={class:"--fc-message-avatar"},Le=["src"],De={class:"--fc-message-content-container"},Ve={__name:"ChatMessage",props:{message:{type:Object,required:!0},options:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:s}){const t=e,o=s,c=j(()=>{var n;return{component:((n=J[t.message.type])==null?void 0:n.component)||Ue,...t.message}}),r=n=>{o("select-option",n)};return(n,i)=>{var m,u,l,h;return p(),v("div",{class:se({"--fc-message-agent-user":e.message.position=="right","--fc-message-host-user":e.message.position=="left"})},[f("div",Re,[c.value.position=="left"?(p(),v("div",Ee,[f("div",Ne,[(u=(m=e.options)==null?void 0:m.hostUser)!=null&&u.avatarUrl?(p(),v("img",{key:0,src:(h=(l=e.options)==null?void 0:l.hostUser)==null?void 0:h.avatarUrl},null,8,Le)):R("",!0)])])):R("",!0),f("div",De,[c.value.component?(p(),z(re(c.value.component),{key:0,message:c.value,options:e.options,onSelectOption:r},null,40,["message","options"])):R("",!0)])])],2)}}},oe=P(Ve,[["__scopeId","data-v-73bbe1e2"]]),Fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function qe(e,s){return p(),v("svg",Fe,s[0]||(s[0]=[f("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))}const ze={render:qe},He={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Je(e,s){return p(),v("svg",He,s[0]||(s[0]=[f("path",{d:"M12.5 8c-2.65 0-5.05 1-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"},null,-1)]))}const Ke={render:Je},Qe={class:"--fc-header-container"},Ye={class:"--fc-header-user"},Ge={class:"--fc-user-avatar"},Ze=["src"],Xe={class:"--fc-user-name"},et={class:"--fc-header-buttons"},tt={class:"--fc-close-button"},st={__name:"ChatHeader",props:{options:{type:Object,default:()=>{}}},emits:["click-reset-button","click-close-button"],setup(e,{emit:s}){const t=s;return(o,c)=>{var r,n,i,m,u,l;return p(),v("div",Qe,[f("div",Ye,[f("div",Ge,[(n=(r=e.options)==null?void 0:r.hostUser)!=null&&n.avatarUrl?(p(),v("img",{key:0,src:(m=(i=e.options)==null?void 0:i.hostUser)==null?void 0:m.avatarUrl},null,8,Ze)):R("",!0)]),f("div",Xe,F((l=(u=e.options)==null?void 0:u.hostUser)==null?void 0:l.name),1)]),f("div",et,[f("button",{class:"--fc-reset-button",onClick:c[0]||(c[0]=h=>t("click-reset-button"))},[S(N(Ke),{class:"--fc-icon"})]),f("button",tt,[S(N(ze),{class:"--fc-icon",onClick:c[1]||(c[1]=h=>t("click-close-button"))})])])])}}},nt=P(st,[["__scopeId","data-v-c74a0ab6"]]),ot={key:0,class:"--fc-modal-backdrop"},at={__name:"TheModal",props:{open:{type:Boolean,default:!1}},setup(e){return(s,t)=>e.open?(p(),v("div",ot,[X(s.$slots,"default",{},void 0,!0)])):R("",!0)}},ct=P(at,[["__scopeId","data-v-0a94d001"]]),it={__name:"ChatResetConfirmModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","confirmed"],setup(e,{emit:s}){const t=s,o=()=>{t("confirmed")},c=()=>{t("update:open",!1)};return(r,n)=>(p(),z(ct,{open:e.open},{default:q(()=>[f("div",{class:"--fc-modal-container"},[n[0]||(n[0]=f("div",{class:"--fc-modal-title"}," Are you sure to restart the chat? ",-1)),f("div",{class:"--fc-modal-actions"},[f("button",{class:"--fc-negative-button",onClick:o}," Yes "),f("button",{class:"--fc-default-button",onClick:c}," No ")])])]),_:1},8,["open"]))}},lt={class:"--fc-body"},rt={key:0,class:"skip-container"},ut={__name:"ChatWindow",props:{scripts:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},emits:["finished","click-close-button"],setup(e,{expose:s,emit:t}){const o=e,c=t,r=j(()=>{var g,a;return(a=(g=o.options)==null?void 0:g.styles)==null?void 0:a.chatWindow}),n=$({open:!1}),i=()=>({id:null,position:"left",type:"text",content:"",options:null}),m=g=>({id:be(),type:"text",skippable:!1,skipText:"Skip",longAnswer:!1,content:"",answer:i(),...g}),u=j(()=>o.scripts.map(m)),l=j(()=>({scripts:u.value,currentScript:y.value,currentScriptIndex:B.value,latestUserMessage:A.value,conversationMessages:h.value,addConversationMessage:w})),h=$([]),_=$(""),y=$(m()),A=$(i()),x=$(i()),B=j(()=>u.value.map(a=>a.id).indexOf(y.value.id)),L=$(),b=j(()=>{let g=null;const a=u.value[B.value+1];return a&&(g=a.id),g}),w=g=>{h.value.push(g),setTimeout(()=>L.value.scrollToBottom(),100),g.position=="left"?x.value=i():V(y.value)?(x.value=g,y.value.answer={...g}):x.value=i()},M=g=>{let a;g?a=u.value.find(W=>W.id==g):a=u.value.find(()=>!0),a&&(y.value=a,w({position:"left",content:a.content,options:a.options,type:a.type}),k())},O=g=>{setTimeout(()=>M(g),300)},d=()=>O(null),C=()=>M(null),k=async(g=!0)=>{var W;if(V(y.value)&&!x.value.content&&g)return!1;if(g){const T=J[y.value.type];if(T&&(T!=null&&T.onValidate)&&T.onValidate({context:l.value,script:y.value,answer:x.value,options:o.options})===!1)return!1}let a=y.value.next;if(typeof a=="function"&&(a=a(l.value,x.value.content),a instanceof Promise))try{a=await a}catch(T){console.log(T);return}if(typeof a=="object"){const T=((W=x.value.content)==null?void 0:W.value)||x.value.content;a=a[T]||(a==null?void 0:a.__unmatched)}if(a||(a=b.value),a){O(a);return}if(!a&&V(y.value)==!1){c("finished",l.value);return}if(!a&&V(y.value)&&x.value){c("finished",l.value);return}},I=async()=>{_.value.trim()&&(w({position:"right",content:_.value,type:"text"}),_.value="",await k())},U=async({option:g})=>{w({position:"right",content:g,type:"text"}),await k()},E=U,D=async()=>{await k(!1)},ae=()=>{n.value.open=!0},ce=()=>{c("click-close-button")},ie=()=>{n.value.open=!1,h.value=[],_.value="",y.value=m(),A.value=i(),x.value=i(),O()};return s({addConversationMessage:w,triggerSelectOptionInMessage:E,startConversationWithDelay:d,startConversation:C}),(g,a)=>(p(),v("div",{class:"--fc-window",style:ue(r.value)},[S(nt,{options:e.options,onClickResetButton:ae,onClickCloseButton:ce},null,8,["options"]),f("div",lt,[S(Be,{ref_key:"chatConversationRef",ref:L,options:e.options},{default:q(()=>[(p(!0),v(ee,null,te(h.value,(W,T)=>(p(),z(oe,{key:T,message:W,options:e.options,onSelectOption:U},null,8,["message","options"]))),128)),y.value.skippable?(p(),v("div",rt,[f("button",{onClick:D},F(y.value.skipText),1)])):R("",!0)]),_:1},8,["options"]),S(Oe,{message:_.value,"onUpdate:message":a[0]||(a[0]=W=>_.value=W),options:e.options,"long-message":y.value.longAnswer,onSubmit:I},null,8,["message","options","long-message"]),S(it,{open:n.value.open,"onUpdate:open":a[1]||(a[1]=W=>n.value.open=W),onConfirmed:ie},null,8,["open"])])],4))}},dt=P(ut,[["__scopeId","data-v-1dc64f0a"]]),pt={class:"--fc-welcome-message-container"},ft={__name:"ChatWelcomeMessage",props:{message:{type:Object,default:()=>{}}},emits:["select-option"],setup(e,{emit:s}){const t=s,o=({message:c,option:r,optionIndex:n})=>{t("select-option",{message:c,option:r,optionIndex:n})};return(c,r)=>(p(),v("div",pt,[S(oe,{message:e.message,onSelectOption:o},null,8,["message"])]))}},mt=P(ft,[["__scopeId","data-v-3d228365"]]),vt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function ht(e,s){return p(),v("svg",vt,s[0]||(s[0]=[f("path",{d:"M15 4v7H5.17L4 12.17V4zm1-2H3a1 1 0 0 0-1 1v14l4-4h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m5 4h-2v9H6v2a1 1 0 0 0 1 1h11l4 4V7a1 1 0 0 0-1-1"},null,-1)]))}const gt={render:ht},yt={class:"--fc-application-inner"},_t={class:"--fc-absolute --fc-bottom-[100%] --fc-w-[400px]"},bt={class:"--fc-absolute --fc-bottom-[100%] --fc-w-[350px]"},wt={__name:"ChatApp",props:{scripts:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},emits:["finished"],setup(e,{expose:s,emit:t}){const o=e,c=t,r=$([]),n=$(null),i=$(!1),m=$(!1),u=j(()=>o.options.welcomeMessage&&m.value==!1),l=j(()=>o.scripts[0]),h=j(()=>{var d,C;return((C=(d=o.options)==null?void 0:d.embedded)==null?void 0:C.type)!="background"}),_=d=>{r.value.push(d)},y=d=>{c("finished",d);for(const C of r.value)C(d)},A=()=>{i.value=!i.value,i.value?x():B()},x=()=>{i.value=!0,m.value==!1&&n.value.startConversationWithDelay(),m.value=!0},B=()=>{i.value=!1},L=()=>A(),b=d=>{u.value!=!1&&(i.value=!0,n.value.startConversation(),n.value.triggerSelectOptionInMessage(d),m.value=!0)},w=()=>{var d;(d=o.options)!=null&&d.clickOutSideClose&&i.value&&B()},M=()=>{var I,U,E,D;if(typeof document>"u")return!1;const d=document.querySelector(":root"),C=(U=(I=o.options)==null?void 0:I.styles)==null?void 0:U.primaryColor,k=(D=(E=o.options)==null?void 0:E.styles)==null?void 0:D.primaryLightColor;C&&(d==null||d.style.setProperty("--fc-primary-color",C)),k&&(d==null||d.style.setProperty("--fc-primary-light-color",k))};Z(()=>o.options,()=>M(),{immediate:!0});const O=()=>{_e({app:{onFinished:_},options:o.options})};return K(()=>O()),K(()=>console.log("%c This website is using formchat.net to create chat boxes. Please visit https://formchat.net/ to get started.","background: #222; color: #bada55")),s({onFinished:_,toggleChatWindow:A,showChatWindow:x,hideChatWindow:B}),(d,C)=>{var k,I,U,E;return H((p(),v("div",{class:se(["--fc-application --fc-formchat-dot-net",{"--fc-dark-theme":((I=(k=e.options)==null?void 0:k.styles)==null?void 0:I.theme)==="dark","--fc-light-theme":((E=(U=e.options)==null?void 0:U.styles)==null?void 0:E.theme)==="light"}])},[f("div",yt,[S(Y,{"enter-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","enter-from-class":"--fc-opacity-0 --fc-translate-y-4","enter-to-class":"--fc-opacity-100 --fc-translate-y-0","leave-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","leave-from-class":"--fc-opacity-100 --fc-translate-y-0","leave-to-class":"--fc-opacity-0 --fc-translate-y-4"},{default:q(()=>[H(f("div",_t,[S(dt,{ref_key:"chatWindowRef",ref:n,options:e.options,scripts:e.scripts,onFinished:y,onClickCloseButton:C[0]||(C[0]=D=>i.value=!1)},null,8,["options","scripts"])],512),[[Q,i.value]])]),_:1}),S(Y,{"enter-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","enter-from-class":"--fc-opacity-0 --fc-translate-y-4","enter-to-class":"--fc-opacity-100 --fc-translate-y-0","leave-active-class":"--fc-transition --fc-duration-150 --fc-ease-in-out","leave-from-class":"--fc-opacity-100 --fc-translate-y-0","leave-to-class":"--fc-opacity-0 --fc-translate-y-4"},{default:q(()=>[H(f("div",bt,[S(mt,{message:l.value,onSelectOption:b},null,8,["message"])],512),[[Q,u.value]])]),_:1})]),h.value?(p(),v("div",{key:0,class:"--fc-bubble-container",onClick:L},[S(N(gt),{class:"--fc-bubble-icon"})])):R("",!0)],2)),[[N(pe.directive),w]])}}},Ct=P(wt,[["__scopeId","data-v-439114c5"]]),G={scripts:[{content:"Bạn sinh năm bao nhiêu",name:"age",type:"select",options:[1996,1997,1998,1999,2e3]},{content:"Cảm ơn bạn đã cung cấp thông tin"}],options:{hostUser:{name:"Phạm Bình",avatarUrl:"/images/phambinh.jpeg"},placeholder:"Type your message here...",closeButton:!0,toggleButton:!0,resetButton:!0,clickOutSideClose:!0,welcomeMessage:!0,styles:{theme:"dark",primaryColor:"#06b6d4",primaryLightColor:"#a5f3fc",chatWindow:{backgroundImage:"url(https://wallpapers.com/images/hd/whatsapp-chat-background-fb34cc4b2hg9lmix.jpg)",backgroundSize:"contain"}},plugins:{googleSheet:{url:"https://script.google.com/macros/s/AKfycbxPp0oSxDWLM_jDn85fGc4dEAe0AtgaeYNZJixO49LJfBMSKlDicu2zm2qgzz49-UM9/exec",sheet:"default"}},hooks:{}}},kt={__name:"ChatApp",setup(e){return(s,t)=>(p(),z(Ct,{scripts:N(G).scripts,options:N(G).options},null,8,["scripts","options"]))}},$t=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"home","hero":{"name":"FormChat","text":"","tagline":"Transform a traditional form to chat box","actions":[{"theme":"brand","text":"Examples","link":"/examples"},{"theme":"alt","text":"WordPress integration","link":"/examples"},{"theme":"alt","text":"Shopify integration","link":"/examples"}]},"features":[{"title":"10+ Field types","details":"Simle question, long question, radio question, rating, datetime picker,..."},{"title":"Easy customize","details":"Lorem ipsum dolor sit amet, consectetur adipiscing elit"},{"title":"Perfect responsive","details":"Lorem ipsum dolor sit amet, consectetur adipiscing elit"},{"title":"Lightweight","details":"Only 106 KB js, and 17 KB css before gzip"}]},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),xt={name:"index.md"},Ot=Object.assign(xt,{setup(e){return(s,t)=>(p(),v("div",null,[S(kt)]))}});export{$t as __pageData,Ot as default};
